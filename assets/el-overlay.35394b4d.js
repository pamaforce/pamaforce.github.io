import{b as te,ah as re,j as ue,ag as de,ai as ce,w as V,a1 as fe,N as U,e as q,y as R,C as g,aj as me,f as P,a as W,o as I,c as x,s as z,n as T,u as o,t as ve,m as M,l as X,D as pe,E as G,x as ye,ak as Ee,g as Ce,h as D,z as be,af as ge,p as Te,q as he,v as we,W as Se,T as ke,O as Me}from"./index.bc464089.js";import{i as F,h as K,e as De,u as J,C as Q,D as Ae,F as Le,G as Ie,c as Z,d as j,r as Be,E as Ne,_ as se,H as Oe,a as Re,q as ee,x as $e,I as Ye,J as oe,w as _e}from"./base.5f46ac5a.js";import{u as ze,F as He,c as We,E as Ue}from"./focus-trap.e5ab570b.js";import{U as ne}from"./typescript.b74ad383.js";import{u as xe,b as Ve}from"./el-button.58c51b64.js";let _;const Xe=e=>{var s;if(!F)return 0;if(_!==void 0)return _;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const i=t.offsetWidth;t.style.overflow="scroll";const l=document.createElement("div");l.style.width="100%",t.appendChild(l);const c=l.offsetWidth;return(s=t.parentNode)==null||s.removeChild(t),_=i-c,_};var H=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(H||{});const le=Symbol("dialogInjectionKey"),Ge=(e,s,t)=>{let i={offsetX:0,offsetY:0};const l=r=>{const d=r.clientX,v=r.clientY,{offsetX:m,offsetY:p}=i,n=e.value.getBoundingClientRect(),f=n.left,h=n.top,B=n.width,N=n.height,A=document.documentElement.clientWidth,O=document.documentElement.clientHeight,L=-f+m,w=-h+p,S=A-f-B+m,E=O-h-N+p,k=y=>{const C=Math.min(Math.max(m+y.clientX-d,L),S),$=Math.min(Math.max(p+y.clientY-v,w),E);i={offsetX:C,offsetY:$},e.value.style.transform=`translate(${K(C)}, ${K($)})`},a=()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",k),document.addEventListener("mouseup",a)},c=()=>{s.value&&e.value&&s.value.addEventListener("mousedown",l)},u=()=>{s.value&&e.value&&s.value.removeEventListener("mousedown",l)};te(()=>{re(()=>{t.value?c():u()})}),ue(()=>{u()})},Ke=e=>{de(e)||De("[useLockscreen]","You need to pass a ref param to this function");const s=J("popup"),t=ce(()=>s.bm("parent","hidden"));if(!F||Q(document.body,t.value))return;let i=0,l=!1,c="0";const u=()=>{Ie(document.body,t.value),l&&(document.body.style.width=c)};V(e,r=>{if(!r){u();return}l=!Q(document.body,t.value),l&&(c=document.body.style.width),i=Xe(s.namespace.value);const d=document.documentElement.clientHeight<document.body.scrollHeight,v=Ae(document.body,"overflowY");i>0&&(d||v==="scroll")&&l&&(document.body.style.width=`calc(100% - ${i}px)`),Le(document.body,t.value)}),fe(()=>u())},ae=e=>{if(!e)return{onClick:U,onMousedown:U,onMouseup:U};let s=!1,t=!1;return{onClick:u=>{s&&t&&e(u),s=t=!1},onMousedown:u=>{s=u.target===u.currentTarget},onMouseup:u=>{t=u.target===u.currentTarget}}},je=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:j([String,Array,Object])},zIndex:{type:j([String,Number])}}),qe={click:e=>e instanceof MouseEvent};var Fe=q({name:"ElOverlay",props:je,emits:qe,setup(e,{slots:s,emit:t}){const i=J("overlay"),l=d=>{t("click",d)},{onClick:c,onMousedown:u,onMouseup:r}=ae(e.customMaskEvent?void 0:l);return()=>e.mask?R("div",{class:[i.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:u,onMouseup:r},[g(s,"default")],H.STYLE|H.CLASS|H.PROPS,["onClick","onMouseup","onMousedown"]):me("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[g(s,"default")])}});const Je=Fe,ie=Z({center:{type:Boolean,default:!1},closeIcon:{type:Be,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Ze={close:()=>!0},Pe=["aria-label"],Qe=["id"],eo={name:"ElDialogContent"},oo=q({...eo,props:ie,emits:Ze,setup(e){const s=e,{t}=ze(),{Close:i}=Oe,{dialogRef:l,headerRef:c,bodyId:u,ns:r,style:d}=P(le),{focusTrapRef:v}=P(He),m=We(v,l),p=W(()=>s.draggable);return Ge(l,c,p),(n,f)=>(I(),x("div",{ref:o(m),class:T([o(r).b(),o(r).is("fullscreen",n.fullscreen),o(r).is("draggable",o(p)),{[o(r).m("center")]:n.center},n.customClass]),style:ye(o(d)),tabindex:"-1",onClick:f[1]||(f[1]=Ee(()=>{},["stop"]))},[z("header",{ref_key:"headerRef",ref:c,class:T(o(r).e("header"))},[g(n.$slots,"header",{},()=>[z("span",{role:"heading",class:T(o(r).e("title"))},ve(n.title),3)]),n.showClose?(I(),x("button",{key:0,"aria-label":o(t)("el.dialog.close"),class:T(o(r).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=h=>n.$emit("close"))},[R(o(Ne),{class:T(o(r).e("close"))},{default:M(()=>[(I(),X(pe(n.closeIcon||o(i))))]),_:1},8,["class"])],10,Pe)):G("v-if",!0)],2),z("div",{id:o(u),class:T(o(r).e("body"))},[g(n.$slots,"default")],10,Qe),n.$slots.footer?(I(),x("footer",{key:0,class:T(o(r).e("footer"))},[g(n.$slots,"footer")],2)):G("v-if",!0)],6))}});var to=se(oo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const so=Z({...ie,appendToBody:{type:Boolean,default:!1},beforeClose:{type:j(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),no={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ne]:e=>Re(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},lo=(e,s)=>{const i=Ce().emit,{nextZIndex:l}=xe();let c="";const u=ee(),r=ee(),d=D(!1),v=D(!1),m=D(!1),p=D(e.zIndex||l());let n,f;const h=$e("namespace",Ye),B=W(()=>{const b={},Y=`--${h.value}-dialog`;return e.fullscreen||(e.top&&(b[`${Y}-margin-top`]=e.top),e.width&&(b[`${Y}-width`]=K(e.width))),b});function N(){i("opened")}function A(){i("closed"),i(ne,!1),e.destroyOnClose&&(m.value=!1)}function O(){i("close")}function L(){f==null||f(),n==null||n(),e.openDelay&&e.openDelay>0?{stop:n}=oe(()=>k(),e.openDelay):k()}function w(){n==null||n(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=oe(()=>a(),e.closeDelay):a()}function S(){function b(Y){Y||(v.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(b):w()}function E(){e.closeOnClickModal&&S()}function k(){!F||(d.value=!0)}function a(){d.value=!1}function y(){i("openAutoFocus")}function C(){i("closeAutoFocus")}e.lockScroll&&Ke(d);function $(){e.closeOnPressEscape&&S()}return V(()=>e.modelValue,b=>{b?(v.value=!1,L(),m.value=!0,i("open"),p.value=e.zIndex?p.value++:l(),be(()=>{s.value&&(s.value.scrollTop=0)})):d.value&&w()}),V(()=>e.fullscreen,b=>{!s.value||(b?(c=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=c)}),te(()=>{e.modelValue&&(d.value=!0,m.value=!0,L())}),{afterEnter:N,afterLeave:A,beforeLeave:O,handleClose:S,onModalClick:E,close:w,doClose:a,onOpenAutoFocus:y,onCloseAutoFocus:C,onCloseRequested:$,titleId:u,bodyId:r,closed:v,style:B,rendered:m,visible:d,zIndex:p}},ao=["aria-label","aria-labelledby","aria-describedby"],io={name:"ElDialog"},ro=q({...io,props:so,emits:no,setup(e,{expose:s}){const t=e,i=ge();Ve({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},W(()=>!!i.title));const l=J("dialog"),c=D(),u=D(),r=D(),{visible:d,titleId:v,bodyId:m,style:p,rendered:n,zIndex:f,afterEnter:h,afterLeave:B,beforeLeave:N,handleClose:A,onModalClick:O,onOpenAutoFocus:L,onCloseAutoFocus:w,onCloseRequested:S}=lo(t,c);Te(le,{dialogRef:c,headerRef:u,bodyId:m,ns:l,rendered:n,style:p});const E=ae(O),k=W(()=>t.draggable&&!t.fullscreen);return s({visible:d,dialogContentRef:r}),(a,y)=>(I(),X(Me,{to:"body",disabled:!a.appendToBody},[R(ke,{name:"dialog-fade",onAfterEnter:o(h),onAfterLeave:o(B),onBeforeLeave:o(N),persisted:""},{default:M(()=>[he(R(o(Je),{"custom-mask-event":"",mask:a.modal,"overlay-class":a.modalClass,"z-index":o(f)},{default:M(()=>[z("div",{role:"dialog","aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:o(v),"aria-describedby":o(m),class:T(`${o(l).namespace.value}-overlay-dialog`),onClick:y[0]||(y[0]=(...C)=>o(E).onClick&&o(E).onClick(...C)),onMousedown:y[1]||(y[1]=(...C)=>o(E).onMousedown&&o(E).onMousedown(...C)),onMouseup:y[2]||(y[2]=(...C)=>o(E).onMouseup&&o(E).onMouseup(...C))},[R(o(Ue),{loop:"",trapped:o(d),"focus-start-el":"container",onFocusAfterTrapped:o(L),onFocusAfterReleased:o(w),onReleaseRequested:o(S)},{default:M(()=>[o(n)?(I(),X(to,{key:0,ref_key:"dialogContentRef",ref:r,"custom-class":a.customClass,center:a.center,"close-icon":a.closeIcon,draggable:o(k),fullscreen:a.fullscreen,"show-close":a.showClose,title:a.title,onClose:o(A)},Se({header:M(()=>[a.$slots.title?g(a.$slots,"title",{key:1}):g(a.$slots,"header",{key:0,close:o(A),titleId:o(v),titleClass:o(l).e("title")})]),default:M(()=>[g(a.$slots,"default")]),_:2},[a.$slots.footer?{name:"footer",fn:M(()=>[g(a.$slots,"footer")])}:void 0]),1032,["custom-class","center","close-icon","draggable","fullscreen","show-close","title","onClose"])):G("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],42,ao)]),_:3},8,["mask","overlay-class","z-index"]),[[we,o(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var uo=se(ro,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const yo=_e(uo);export{yo as E};
